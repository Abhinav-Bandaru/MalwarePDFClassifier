//selecting all required elements
const dropArea = document.querySelector(".drag-area");
const dragText = dropArea.querySelector(".header");
const f = document.querySelector(".f1");
const fname = document.querySelector(".fname");
const support = document.querySelector(".support");
console.log(support);

let button = dropArea.querySelector(".btn");
let input = dropArea.querySelector("input");
let file; //this is a global variable and we'll use it inside multiple functions
button.onclick = ()=>{
  input.click(); //if user click on the button then the input also clicked
}

//When we browse
input.addEventListener("change", function(){
  //getting user select file and [0] this means if user select multiple files then we'll select only the first one
  file = this.files[0];
  console.log(file);
  dropArea.classList.add("active");
  showFile(); //calling function
});

function showFile(){
  let fileType = file.type; //getting selected file type
  //console.log(fileType);
  let validExtensions = ["application/pdf"]; //adding the valid extension in array
  if(validExtensions.includes(fileType)){ //if user selected file is an pdf file
    let fileReader = new FileReader(); //creating new FileReader object
    fileReader.onload = ()=>{
      let fileURL = fileReader.result; //passing user file source in fileURL variable
      console.log("URL",fileURL);
      support.style.fontSize = "15px";

      let a= `
      <h5> 
      <i class="fa fa-check" aria-hidden="true" style="color:green;"></i>
      File ${file['name']}<span style="color:green"> successfully uploaded</span>
      </h5>`;

      fname.innerHTML=a;
      localStorage.setItem("filename", file['name']);
      //dropArea.textContent = "File successfully uploaded";
    }
    fileReader.readAsDataURL(file);
  }else{
    alert("This is not a PDF File!");
    dropArea.classList.remove("active");
  }
}